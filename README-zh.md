voyant 是一个基于bpf指令集的动态追踪领域特定语言， 它具有如何特点:

- **轻量级**: 编译器和解析器全部手工完成，不借助任何编译器工具，比如yacc或者llvm， 这样做的目的就是为了保证项目的轻量级和简单。
- **语义清晰**: DSL会尽量的与通用的编程语言靠近, 同时会在一定的概念上进行扩展, 比如可以输出火焰图，方便领域专家做性能分析
- **兼容:*** 保持一定的兼容性, 不会使用BPF的一些特别新的特性, 这是因为新的特性很好, 但是在一些比较低的版本上是无法运行的

**note: 目前项目正在重构**

### hello, world 

```c
probe sys_enter_execve {
    out("%s\n", "hello, world");
}
```

### 变量

因为现在的寄存器分配算法还存在一些问题, 目前最好不要设置多个变量
- 在ebpf中一共存在11个寄存器, 其中`r1-r5`用作对应函数参数
- r0被用来作为函数的返回值, 也用作临时变量
- `r9` 被用作保护程序的上下文
- `r6-r8`这三个寄存器是通用的寄存器

```c
probe sys_enter_execve {
    a = 1;
    out("%d\n", a);
}
```

### 辅助函数

```c
probe sys_enter_execve {
    out("pid: %d, cpu: %d", pid(), cpu());
}
```